import{p as w,a as g,e as M,f,r as L,o as u,i as p,L as B,u as _,C as v,D as $,E as b,j as D,N as z}from"./entry-6cd864d6.mjs";import{u as A}from"./useKeyboard-44b65f00.mjs";import{o as H}from"./onDragStart-b67a33ef.mjs";const N=a=>($("data-v-059b5d7a"),a=a(),b(),a),T=["id"],Z=N(()=>D("path",{d:"M12 2C11.5 2 11 2.19 10.59 2.59L2.59 10.59C1.8 11.37 1.8 12.63 2.59 13.41L10.59 21.41C11.37 22.2 12.63 22.2 13.41 21.41L21.41 13.41C22.2 12.63 22.2 11.37 21.41 10.59L13.41 2.59C13 2.19 12.5 2 12 2Z"},null,-1)),j=[Z],F=g({__name:"KeyframeMarker",props:{animation:null,scale:null,left:null,stripId:null,effect:null},setup(a){const t=a,{timeline:o,selectKeyframe:r,updateEffect:h,getFisrtSelectedStrip:y}=M(),S=24,s=12,x=f(()=>({top:`${S/2-s/2}px`,left:`${t.left+t.animation.time*t.scale-s/2}px`})),I=f(()=>o.value.selectedKeyframes.includes(t.animation)),n=L(!1);function k(){n.value&&r([t.animation]),n.value=!1}function C(c){c.stopPropagation(),n.value=!0;const l=t.animation.time;H(c,(G,P,E)=>{if(!t.effect||(n.value=!1,o.value.selectedKeyframes.find(e=>e.id===t.animation.id)||r([t.animation]),!y()))return;const d=o.value.selectedKeyframes.filter(e=>e.id!==t.animation.id).map(e=>e.id),i={...t.effect,animations:t.effect.animations.map(e=>({...e}))};i.animations.forEach(e=>{(e.id===t.animation.id||d.includes(e.id))&&(e.time=z(l+E.x/t.scale))}),i.animations.sort((e,K)=>e.time-K.time),h(t.stripId,i);const m=[];i.animations.forEach(e=>{d.includes(e.id)&&m.push(e)}),r([i.animations.find(e=>e.id===t.animation.id),...m])})}return A(),(c,l)=>(u(),p("div",{id:a.animation.id,style:v(_(x)),class:"keyframe-marker cursor-pointer"},[(u(),p("svg",{class:B(_(I)?"selected":""),style:v(`width: ${s}px; height: ${s}px`),viewBox:"0 0 24 24",onMouseup:k,onMousedown:C},j,38))],12,T))}});var Q=w(F,[["__scopeId","data-v-059b5d7a"]]);export{Q as default};
