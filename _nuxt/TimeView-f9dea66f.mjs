import{a as w}from"./usePixPerSec-fc9c7694.mjs";import{o as b}from"./onDragStart-b67a33ef.mjs";import{p as S,a as M,r as k,f,x as B,o as m,i as c,F,z as T,u as V,N as X,C as x,j as z,t as C}from"./entry-c28f6d48.mjs";const P=M({__name:"TimeView",props:{start:null,length:null},emits:["move"],setup(_,{emit:h}){const o=_,l=k(null),p=f(()=>w(l.value,o.length)),v=[...Array(10)].map((e,s)=>2**s),g=f(()=>{const e=[],s=Math.ceil(p.value/80),t=v.find(r=>r>=s)||1,a=1/t;let i=0;for(let r=Math.floor(o.start);r<o.start+o.length;r+=a){const n=X(Math.floor(o.start)+i*a);let u=n.toFixed(0);u+=".",e.push({time:u+n.toFixed(3).padEnd(3,"0").split(".")[1],left:(n-o.start)*p.value,type:n%1===0?"time":"time-half"}),i++}return e});function d(e){var i;const s=((i=l.value)==null?void 0:i.getBoundingClientRect().left)||0,a=(e.clientX-s)/p.value+o.start;h("move",a)}function y(e){d(e),b(e,(s,t)=>{d(t)}),e.stopPropagation()}return B(()=>{}),(e,s)=>(m(),c("div",{ref_key:"el",ref:l,class:"view",style:{height:"20px","font-size":"4px","line-height":"20px","border-bottom":"1px solid",width:"100%",position:"relative",overflow:"hidden"},onMousedown:y},[(m(!0),c(F,null,T(V(g),(t,a)=>(m(),c("div",{key:a,class:"sec",style:x([{"padding-left":"1px"},{position:"absolute",left:t.left+"px",bottom:"0",lineHeight:"12px",borderLeft:t.type==="time"?"1px solid white":"1px solid gray",color:t.type==="time"?"white":"gray",height:t.type==="time"?"20px":"12px"}])},[z("div",{style:x({position:"absolute",bottom:"0",transformOrigin:"left bottom",transform:t.type==="time"?"scale(1)":"scale(0.8)"})},C(t.time),5)],4))),128))],544))}});var L=S(P,[["__scopeId","data-v-0ca58644"]]);export{L as default};
