import T from"./VButton-59470fa7.mjs";import N from"./VModal-559773d8.mjs";import{a1 as k,a2 as A,A as O,a as R,H as B,e as b,b as I,r as M,x as D,o as u,c as F,h as _,j as l,k as f,i as j,y as H,F as J,a3 as g,t as V}from"./entry-fdc94497.mjs";import{g as K}from"./getIsElectron()-f1a2ad23.mjs";function P(){return{path:"",timeline:{...k},assets:{selectedAssets:[],assets:[]},container:{...A}}}function U(){return{project:O("project",()=>P(),"$oNIFN2jTpW")}}function Y(s,a){return new Promise(c=>{window.ipcRenderer.on(s,i=>{c(i)}),window.ipcRenderer.send(s,a)})}const z=l("h3",{style:{margin:"12px","margin-left":"0"}}," Projects ",-1),G=g(" New Project "),L=l("div",{style:{margin:"12px","margin-left":"0"}}," Recent used projects ",-1),W={style:{gap:"4px",display:"flex","flex-direction":"column"}},$=R({__name:"ProjectModal",props:{isOpen:{default:!1,type:Boolean}},emits:["open"],setup(s,{emit:a}){const{setContainer:c}=B(),{setTimeline:i}=b(),{setAssets:d}=I(),{project:h}=U(),x="RECENT_USED_PROJECT_PATHS_KEY";async function y(e){return(await fetch(e)).json()}function E(){const e=K();return JSON.parse(localStorage.getItem(x)||(e?"[]":'["/vega/demo/demo_project.json"]')).map(async t=>({...e?await Y("getProjectById",t):await y(t),path:t}))}const m=M([]);function S(e,n){const t=[];let r=0;function o(){r<e.length?e[r++].then(p=>{t.push(p),o()}):n(t)}o()}D(()=>{S(E(),e=>{m.value=e})});function v(e){const n=e.path.split("/");return n.length===0?"":n.at(-1)}function w(){const e=P();d(e.assets),i(e.timeline),c(e.container),a("open")}function C(e){d(e.assets),i(e.timeline),c(e.container),a("open"),h.value=e}return(e,n)=>{const t=T,r=N;return u(),F(r,{"show-close":!1,"is-open":s.isOpen},{default:_(()=>[z,l("div",null,[f(t,{onClick:w},{default:_(()=>[G]),_:1})]),L,l("div",W,[(u(!0),j(J,null,H(m.value,(o,p)=>(u(),j("div",{key:p},[f(t,{onClick:()=>C(o)},{default:_(()=>[g(V(v(o)),1)]),_:2},1032,["onClick"])]))),128))])]),_:1},8,["is-open"])}}});var ee=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{ee as P,$ as _,Y as i,U as u};
