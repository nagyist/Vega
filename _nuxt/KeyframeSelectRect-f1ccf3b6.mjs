import{p as C,a as $,e as b,r as e,f as w,x as K,J as M,M as k,o as I,i as L,C as X,u as Y}from"./entry-3e2f788a.mjs";const D=$({__name:"KeyframeSelectRect",setup(z){const{timeline:R,selectStrip:A,selectKeyframe:S}=b(),i=e(!1),m=e(0),_=e(0),h=e(0),g=e(0),r=e(0),v=e(0),y=e([]),f=e(null),p=w(()=>R.value.selectedStrips.find(o=>!0));K(()=>{if(!f.value)return;const o=f.value.parentElement;o.addEventListener("mousedown",t=>{var l;if(!p.value)return;y.value=[],(l=p.value)==null||l.effects.forEach(s=>{s.animations&&s.animations.forEach(a=>{const u=document.getElementById(`${a.id}`);u&&y.value.push(u)})}),i.value=!0;const c=o.getBoundingClientRect();r.value=t.clientX-c.left,v.value=t.clientY-c.top}),window.addEventListener("mousemove",t=>{var x;if(!i.value||!p.value)return;const c=o.getBoundingClientRect(),l=t.clientX-c.left,s=t.clientY-c.top;m.value=l<r.value?l:r.value,_.value=s<v.value?s:v.value,h.value=Math.abs(l-r.value),g.value=Math.abs(s-v.value);const a=(x=f.value)==null?void 0:x.getBoundingClientRect();if(!a)return;const u=[];y.value.forEach(d=>{const n=d.getBoundingClientRect();n.left<a.right&&n.right>a.left&&n.top<a.bottom&&n.bottom>a.top&&u.push(d.id)});const E=[];p.value.effects.forEach(d=>{d.animations.forEach(n=>{u.includes(`${n.id}`)&&E.push(n)})}),S(E)}),window.addEventListener("mouseup",t=>{t.stopPropagation(),i.value=!1,m.value=0,_.value=0,h.value=0,g.value=0})});const B=w(()=>({left:`${m.value}px`,top:`${_.value}px`,width:`${h.value}px`,height:`${g.value}px`}));return(o,t)=>M((I(),L("div",{ref_key:"el",ref:f,class:"select-rect",style:X(Y(B))},null,4)),[[k,i.value]])}});var P=C(D,[["__scopeId","data-v-0ae179f6"]]);export{P as default};
