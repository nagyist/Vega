import A from"./VButton-eac02064.mjs";import R from"./VModal-15c9a48b.mjs";import{a2 as B,q as b,N as P,a as J,r as M,E as V,o as _,c as D,e as m,h as p,i as j,f as g,G as I,F as U,a3 as h,t as z}from"./entry-cf7f9e40.mjs";import{g as F,a as E,u as S}from"./useTimeline-6cb6bf32.mjs";import{g as G}from"./getIsElectron-dd460f76.mjs";function x(){return{path:"",timeline:{...F},assets:{selectedAssets:[],assets:[]},container:{...B}}}function H(){return{project:b("project",()=>x(),"$rUpZX11gTX")}}function ne(n){const{setContainer:r}=P(),{setTimeline:c}=E(),{setAssets:a}=S(),o=JSON.parse(n);return r(o.container),c(o.timeline),a(o.assets),o}function K(n,r){return new Promise(c=>{window.ipcRenderer.on(n,a=>{c(a)}),window.ipcRenderer.send(n,r)})}const X=p("h3",{style:{margin:"12px","margin-left":"0"}}," Projects ",-1),Y=h(" New Project "),q=p("div",{style:{margin:"12px","margin-left":"0"}}," Recent used projects ",-1),L={style:{gap:"4px",display:"flex","flex-direction":"column"}},Z=J({__name:"ProjectModal",props:{isOpen:{default:!1,type:Boolean}},emits:["open"],setup(n,{emit:r}){const{setContainer:c,resize:a}=P(),{setTimeline:o}=E(),{setAssets:d}=S(),{project:y}=H(),C="RECENT_USED_PROJECT_PATHS_KEY";async function T(e){return(await fetch(e)).json()}function w(){const e=G();return JSON.parse(localStorage.getItem(C)||(e?"[]":'["/Vega/demo/demo_project.json"]')).map(async t=>({...e?await K("getProjectById",t):await T(t),path:t}))}const f=M([]);function v(e,s){const t=[];let l=0;function i(){l<e.length?e[l++].then(u=>{t.push(u),i()}):s(t)}i()}V(()=>{v(w(),e=>{f.value=e})});function N(e){const s=e.path.split("/");return s.length===0?"":s.at(-1)}function O(){const e=x();d(e.assets),o(e.timeline),c(e.container),r("open"),a()}function k(e){d(e.assets),o(e.timeline),c(e.container),r("open"),y.value=e,a()}return(e,s)=>{const t=A,l=R;return _(),D(l,{"show-close":!1,"is-open":n.isOpen},{default:m(()=>[X,p("div",null,[j(t,{onClick:O},{default:m(()=>[Y]),_:1})]),q,p("div",L,[(_(!0),g(U,null,I(f.value,(i,u)=>(_(),g("div",{key:u},[j(t,{onClick:()=>k(i)},{default:m(()=>[h(z(N(i)),1)]),_:2},1032,["onClick"])]))),128))])]),_:1},8,["is-open"])}}});var oe=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{oe as P,Z as _,ne as a,K as i,H as u};
