import A from"./VButton-c746f88c.mjs";import B from"./VModal-b3e93367.mjs";import{B as R,a3 as b,q as J,Q as P,a as M,r as V,G as D,o as _,c as H,e as m,h as p,i as j,f as g,H as I,F as U,a4 as h,t as z}from"./entry-2c5f53bd.mjs";import{a as S,u as E}from"./useTimeline-08cac75e.mjs";import{g as F}from"./getIsElectron-dd460f76.mjs";function x(){return{path:"",timeline:{...R},assets:{selectedAssets:[],assets:[]},container:{...b}}}function G(){return{project:J("project",()=>x(),"$rUpZX11gTX")}}function ne(n){const{setContainer:r}=P(),{setTimeline:c}=S(),{setAssets:a}=E(),o=JSON.parse(n);return r(o.container),c(o.timeline),a(o.assets),o}function K(n,r){return new Promise(c=>{window.ipcRenderer.on(n,a=>{c(a)}),window.ipcRenderer.send(n,r)})}const X=p("h3",{style:{margin:"12px","margin-left":"0"}}," Projects ",-1),Y=h(" New Project "),q=p("div",{style:{margin:"12px","margin-left":"0"}}," Recent used projects ",-1),L={style:{gap:"4px",display:"flex","flex-direction":"column"}},Q=M({__name:"ProjectModal",props:{isOpen:{default:!1,type:Boolean}},emits:["open"],setup(n,{emit:r}){const{setContainer:c,resize:a}=P(),{setTimeline:o}=S(),{setAssets:d}=E(),{project:y}=G(),C="RECENT_USED_PROJECT_PATHS_KEY";async function T(e){return(await fetch(e)).json()}function w(){const e=F();return JSON.parse(localStorage.getItem(C)||(e?"[]":'["/Vega/demo/demo_project.json"]')).map(async t=>({...e?await K("getProjectById",t):await T(t),path:t}))}const f=V([]);function v(e,s){const t=[];let l=0;function i(){l<e.length?e[l++].then(u=>{t.push(u),i()}):s(t)}i()}D(()=>{v(w(),e=>{f.value=e})});function N(e){const s=e.path.split("/");return s.length===0?"":s.at(-1)}function O(){const e=x();d(e.assets),o(e.timeline),c(e.container),r("open"),a()}function k(e){d(e.assets),o(e.timeline),c(e.container),r("open"),y.value=e,a()}return(e,s)=>{const t=A,l=B;return _(),H(l,{"show-close":!1,"is-open":n.isOpen},{default:m(()=>[X,p("div",null,[j(t,{onClick:O},{default:m(()=>[Y]),_:1})]),q,p("div",L,[(_(!0),g(U,null,I(f.value,(i,u)=>(_(),g("div",{key:u},[j(t,{onClick:()=>k(i)},{default:m(()=>[h(z(N(i)),1)]),_:2},1032,["onClick"])]))),128))])]),_:1},8,["is-open"])}}});var oe=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{oe as P,Q as _,ne as a,K as i,G as u};
