import{p as T,a as k,H as B,r as v,x as _,T as F,w as M,f as P,o as m,i as d,F as V,y as X,u as z,R as C,z as h,j as E,t as L}from"./entry-4d34f830.mjs";import{a as j}from"./usePixPerSec-e7f842ac.mjs";import{o as D}from"./onDragStart-b67a33ef.mjs";const H=k({__name:"TimeView",props:{start:null,length:null},emits:["move"],setup(x,{emit:g}){const a=x,{addEventListener:y}=B(),c=v(null),n=v(0),r=()=>{n.value=j(c.value,a.length)};_(()=>{r(),y("resize",r)}),F(()=>{r()}),M(()=>[a.start,a.length],r);const w=[...Array(10)].map((e,o)=>2**(o-5)),S=P(()=>{const e=[],o=n.value/100,t=w.find(l=>l>=o)||1,s=1/t;let i=0;for(let l=Math.floor(a.start);l<a.start+a.length;l+=s){const p=C(Math.floor(a.start)+i*s);let f=p.toFixed(0);f+=".",e.push({time:f+p.toFixed(3).padEnd(3,"0").split(".")[1],left:(p-a.start)*n.value,type:p%1===0?"time":"time-half"}),i++}return e});function u(e){var i;const o=((i=c.value)==null?void 0:i.getBoundingClientRect().left)||0,s=(e.clientX-o)/n.value+a.start;g("move",s)}function b(e){u(e),D(e,(o,t)=>{u(t)}),e.stopPropagation()}return _(()=>{}),(e,o)=>(m(),d("div",{ref_key:"el",ref:c,class:"view",style:{height:"20px","line-height":"20px",width:"100%",position:"relative",overflow:"hidden"},onMousedown:b},[(m(!0),d(V,null,X(z(S),(t,s)=>(m(),d("div",{key:s,class:"sec",style:h([{"padding-left":"1px"},{position:"absolute",left:t.left+"px",bottom:"0",lineHeight:"12px",borderLeft:t.type==="time"?"1px solid white":"1px solid gray",color:t.type==="time"?"white":"gray",height:t.type==="time"?"20px":"12px"}])},[E("div",{style:h({position:"absolute",bottom:"0",transformOrigin:"left bottom",transform:t.type==="time"?"scale(1)":"scale(0.8)"})},L(t.time),5)],4))),128))],544))}});var N=T(H,[["__scopeId","data-v-aa0ca570"]]);export{N as default};
