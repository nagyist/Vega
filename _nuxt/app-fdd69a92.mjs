import{d as x,_ as w}from"./RecordingButton-12bc2944.mjs";import A from"./ShowStatsButton-25d92a60.mjs";import I from"./ContainerUi-ebc8dcc0.mjs";import N from"./OperationHistoryPanel-17e18de5.mjs";import{p as P,a as F,H as K,e as J,b as R,f as U,r as $,x as B,a5 as y,o as H,i as M,j as h,k as s,u as S,z as V}from"./entry-5722d099.mjs";import{u as z}from"./useOperation-58ffd711.mjs";import{u as D}from"./useKeyboard-ea2bfea0.mjs";import{u as L}from"./useUpdate-7d51abfe.mjs";import{u as Y,i as g,_ as q,a as W}from"./ProjectModal-f3369b30.mjs";import X from"./ButtonMenu-904591b8.mjs";import G from"./SettingsButton-c4eadf8a.mjs";import{c as u}from"./clone-0e5b969a.mjs";import{g as Q}from"./getIsElectron-dd460f76.mjs";import"./Recorder-e64cbf6d.mjs";import"./RecordingModal-ec987ab1.mjs";import"./VButton-7c09fb6b.mjs";import"./VModal-9b58df8b.mjs";import"./VIcons-478a8699.mjs";import"./mdi-00233b2d.mjs";import"./PanelUi-8176e5c4.mjs";import"./useDragAndDrop-4f85d13a.mjs";import"./ResizeTop-b91557a9.mjs";import"./ResizeLeft-b3767cb3.mjs";import"./onDragStart-b67a33ef.mjs";import"./RectUi-3b95f249.mjs";import"./SettingsModal-76fd02fa.mjs";import"./VNumberInput-0b7fa48f.mjs";import"./VInputBase-e3014785.mjs";function Z(_){const t=document.createElement("input");t.type="file",t.accept=".json",t.click(),t.onchange=()=>{if(!t.files)return;const i=t.files[0];if(!i)return;const n=new FileReader;n.onload=()=>{typeof n.result=="string"&&_(n.result)},n.readAsText(i)}}function ee(){return navigator.platform.toUpperCase().includes("MAC")}const te={style:{height:"calc(100vh - 48px)"}},oe={class:"header-menu"},ne=F({__name:"app",setup(_){const{container:t}=K(),{init:i,timeline:n}=J(),{assets:f}=R(),C=z(),{init:k}=D(),{update:j}=L(),{project:c}=Y(),O=U(()=>t.value),d=$(!0);B(()=>{k();let o=0;const l=e=>{j(e-o),requestAnimationFrame(l),o=e};l(0),window.addEventListener("keydown",e=>{const a=ee()?e.metaKey:e.ctrlKey;e.keyCode===90&&e.shiftKey&&a?y.redo():e.keyCode===90&&a&&y.undo();const m=Q();e.keyCode===83&&a&&(m?c.value.path?g("SAVE_FILE",{path:c.value.path,data:p()}):g("SAVE_NEW_FILE",p()).then(r=>{if(r===!1)return;const E=JSON.parse(localStorage.getItem("RECENT_USED_PROJECT_PATHS_KEY")||"[]");E.push(r),localStorage.setItem("RECENT_USED_PROJECT_PATHS_KEY",JSON.stringify(E)),c.value={assets:u(f.value),container:u(t.value),timeline:u(n.value),path:r}}):v(),C.pushHistory("Save"),e.preventDefault())}),i()});function v(){const o=p();x(o,"project.json")}function p(){const o={container:t.value,timeline:n.value,assets:f.value};return JSON.stringify(o)}function T(){d.value=!1,i()}const b=()=>{Z(o=>{W(o)})};return(o,l)=>{const e=w,a=A,m=I,r=N;return H(),M("div",{class:"root text-white bg-background1",style:V({display:S(t).align==="horizontal"?"flex":"block"})},[h("div",te,[h("div",oe,[s(e),s(X,{label:"File",items:[{name:"Open",onClick:b},{name:"Save",onClick:v}]},null,8,["items"]),s(G),s(a)]),s(m,{container:S(O)},null,8,["container"]),s(r)]),s(q,{"is-open":d.value,onOpen:T},null,8,["is-open"])],4)}}});var Ne=P(ne,[["__scopeId","data-v-1bae7efd"]]);export{Ne as default};
