import{k,a as B,Q as F,r as h,G as v,a1 as M,w as P,b as T,o as c,f as d,F as V,H as X,u as C,I as _,h as E,t as L}from"./entry-5a88fbbc.mjs";import{a as z}from"./usePixPerSec-a1f9d7e8.mjs";import{o as D}from"./onDragStart-b67a33ef.mjs";import{s as H}from"./useTimeline-7a16e4c3.mjs";const I=B({__name:"TimeView",props:{start:null,length:null},emits:["move"],setup(g,{emit:x}){const e=g,{addEventListener:y}=F(),m=h(null),n=h(0),r=()=>{n.value=z(m.value,e.length)};v(()=>{r(),y("resize",r)}),M(()=>{r()}),P(()=>[e.start,e.length],r);const w=[...Array(10)].map((o,s)=>2**(s-5)),b=T(()=>{const o=[],s=n.value/100,t=w.find(l=>l>=s)||1,a=1/t;let i=0;for(let l=Math.floor(e.start);l<e.start+e.length;l+=a){const p=H(Math.floor(e.start-e.start%a)+i*a);let f=p.toFixed(0);f+=".",o.push({time:f+p.toFixed(3).padEnd(3,"0").split(".")[1],left:(p-e.start)*n.value,type:p%1===0?"time":"time-half"}),i++}return o});function u(o){var i;const s=((i=m.value)==null?void 0:i.getBoundingClientRect().left)||0,a=(o.clientX-s)/n.value+e.start;x("move",a)}function S(o){u(o),D(o,(s,t)=>{u(t)}),o.stopPropagation()}return v(()=>{}),(o,s)=>(c(),d("div",{ref_key:"el",ref:m,class:"view",style:{height:"20px","line-height":"20px",width:"100%",position:"relative",overflow:"hidden"},onMousedown:S},[(c(!0),d(V,null,X(C(b),(t,a)=>(c(),d("div",{key:a,class:"sec",style:_([{"padding-left":"1px"},{position:"absolute",left:t.left+"px",bottom:"0",lineHeight:"12px",borderLeft:t.type==="time"?"1px solid white":"1px solid gray",color:t.type==="time"?"white":"gray",height:t.type==="time"?"20px":"12px"}])},[E("div",{style:_({position:"absolute",bottom:"0",transformOrigin:"left bottom",transform:t.type==="time"?"scale(1)":"scale(0.8)"})},L(t.time),5)],4))),128))],544))}});var O=k(I,[["__scopeId","data-v-57f38200"]]);export{O as default};
