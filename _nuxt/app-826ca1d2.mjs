import w from"./RecordingButton-4b9ddb62.mjs";import I from"./ShowStatsButton-702f92ec.mjs";import J from"./ContainerUi-7e8b1a68.mjs";import F from"./OperationHistoryPanel-900f26ea.mjs";import{p as K,a as P,H as R,e as U,b as $,x as B,a5 as _,f as H,r as M,o as V,i as z,j as d,k as n,u as h,z as D}from"./entry-4d34f830.mjs";import{u as L}from"./useOperation-fd0c41a6.mjs";import{u as Y}from"./useKeyboard-9e0ec2f4.mjs";import{u as q}from"./useUpdate-61ecb60c.mjs";import{u as W,i as E,_ as X}from"./ProjectModal-1d373201.mjs";import G from"./ButtonMenu-e5221334.mjs";import Q from"./SettingsButton-8181844d.mjs";import{g as Z}from"./getIsElectron()-f1a2ad23.mjs";import"./Recorder-a6bfe077.mjs";import"./RecordingModal-6f5deaf9.mjs";import"./VButton-55a24dee.mjs";import"./VModal-9bfe8b67.mjs";import"./VIcons-5d7db2dd.mjs";import"./mdi-00233b2d.mjs";import"./PanelUi-d92efbbd.mjs";import"./LayoutChangeArea-6ec0c1e5.mjs";import"./useDragAndDrop-15835093.mjs";import"./ResizeTop-7aa4d54d.mjs";import"./ResizeLeft-dc4377a3.mjs";import"./RectUi-6a8a4de8.mjs";import"./onDragStart-b67a33ef.mjs";import"./SettingsModal-95350523.mjs";import"./VNumberInput-368c9cc2.mjs";import"./VInputBase-c8b9f373.mjs";const ee={style:{height:"calc(100vh - 48px)"}},te={class:"header-menu"},oe=P({__name:"app",setup(ne){const{container:r,setContainer:v}=R(),{init:p,timeline:y,setTimeline:S}=U(),{assets:g,setAssets:C}=$(),j=L(),{init:k}=Y(),{update:O}=q(),{project:m}=W();B(()=>{k();let t=0;const o=e=>{O(e-t),requestAnimationFrame(o),t=e};o(0),window.addEventListener("keydown",e=>{const s=T()?e.metaKey:e.ctrlKey;e.keyCode===90&&e.shiftKey&&s?_.redo():e.keyCode===90&&s&&_.undo();const c=Z();e.keyCode===83&&s&&(c?m.value.path?E("SAVE_FILE",{path:m.value.path,data:a()}):E("SAVE_NEW_FILE",a()).then(i=>{if(i===!1)return;const f=JSON.parse(localStorage.getItem("RECENT_USED_PROJECT_PATHS_KEY")||"[]");f.push(i),localStorage.setItem("RECENT_USED_PROJECT_PATHS_KEY",JSON.stringify(f))}):l(),j.pushHistory("Save"),e.preventDefault())}),p()});function T(){return navigator.platform.toUpperCase().includes("MAC")}function x(){const t=document.createElement("input");t.type="file",t.accept=".json",t.click(),t.onchange=()=>{if(!t.files)return;const o=t.files[0];if(!o)return;const e=new FileReader;e.onload=()=>{typeof e.result=="string"&&A(e.result)},e.readAsText(o)}}function l(){const t=a(),o=document.createElement("a");o.href="data:text/json;charset=utf-8,"+encodeURIComponent(t),o.download="project.json",o.click()}function a(){const t={container:r.value,timeline:y.value,assets:g.value};return JSON.stringify(t)}function A(t){const o=JSON.parse(t);return v(o.container),S(o.timeline),C(o.assets),o}const N=H(()=>r.value),u=M(!0);function b(){u.value=!1,p()}return(t,o)=>{const e=w,s=I,c=J,i=F;return V(),z("div",{class:"root text-white bg-background1",style:D({display:h(r).align==="horizontal"?"flex":"block"})},[d("div",ee,[d("div",te,[n(e),n(G,{label:"File",items:[{name:"Open",onClick:x},{name:"Save",onClick:l}]},null,8,["items"]),n(Q),n(s)]),n(c,{container:h(N)},null,8,["container"]),n(i)]),n(X,{"is-open":u.value,onOpen:b},null,8,["is-open"])],4)}}});var Ie=K(oe,[["__scopeId","data-v-1529c332"]]);export{Ie as default};
