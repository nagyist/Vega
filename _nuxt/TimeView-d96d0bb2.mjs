import{p as k,a as B,A as C,r as v,x,w as F,f as M,o as m,i as d,F as P,z as T,u as V,N as X,C as _,j as z,t as E}from"./entry-09db89fd.mjs";import{a as L}from"./usePixPerSec-a3affabe.mjs";import{o as j}from"./onDragStart-b67a33ef.mjs";const A=B({__name:"TimeView",props:{start:null,length:null},emits:["move"],setup(h,{emit:g}){const o=h,{addEventListener:y}=C(),p=v(null),n=v(0),c=()=>{n.value=L(p.value,o.length)};x(()=>{c(),y("resize",c)}),F(()=>[o.start,o.length],c);const w=[...Array(10)].map((e,s)=>2**(s-5)),b=M(()=>{const e=[],s=n.value/80,t=w.find(r=>r>=s)||1,a=1/t;let i=0;for(let r=Math.floor(o.start);r<o.start+o.length;r+=a){const l=X(Math.floor(o.start)+i*a);let f=l.toFixed(0);f+=".",e.push({time:f+l.toFixed(3).padEnd(3,"0").split(".")[1],left:(l-o.start)*n.value,type:l%1===0?"time":"time-half"}),i++}return e});function u(e){var i;const s=((i=p.value)==null?void 0:i.getBoundingClientRect().left)||0,a=(e.clientX-s)/n.value+o.start;g("move",a)}function S(e){u(e),j(e,(s,t)=>{u(t)}),e.stopPropagation()}return x(()=>{}),(e,s)=>(m(),d("div",{ref_key:"el",ref:p,class:"view",style:{height:"20px","line-height":"20px","border-bottom":"1px solid",width:"100%",position:"relative",overflow:"hidden"},onMousedown:S},[(m(!0),d(P,null,T(V(b),(t,a)=>(m(),d("div",{key:a,class:"sec",style:_([{"padding-left":"1px"},{position:"absolute",left:t.left+"px",bottom:"0",lineHeight:"12px",borderLeft:t.type==="time"?"1px solid white":"1px solid gray",color:t.type==="time"?"white":"gray",height:t.type==="time"?"20px":"12px"}])},[z("div",{style:_({position:"absolute",bottom:"0",transformOrigin:"left bottom",transform:t.type==="time"?"scale(1)":"scale(0.8)"})},E(t.time),5)],4))),128))],544))}});var I=k(A,[["__scopeId","data-v-25f7b6fe"]]);export{I as default};
