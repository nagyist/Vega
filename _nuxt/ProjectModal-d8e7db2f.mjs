import A from"./VButton-7788993d.mjs";import B from"./VModal-88b202d4.mjs";import{B as R,a4 as V,q as b,Q as P,a as H,r as I,G as J,o as _,c as M,e as m,h as p,i as j,f as g,H as D,F as z,a5 as h,t as F}from"./entry-29da48b6.mjs";import{a as S,u as E}from"./useTimeline-80d07c57.mjs";import{g as G}from"./getIsElectron-dd460f76.mjs";function x(){return{path:"",timeline:{...R},assets:{selectedAssets:[],assets:[]},container:{...V}}}function K(){return{project:b("project",()=>x(),"$TSpWZVWIHN")}}function ne(n){const{setContainer:r}=P(),{setTimeline:c}=S(),{setAssets:a}=E(),o=JSON.parse(n);return r(o.container),c(o.timeline),a(o.assets),o}function U(n,r){return new Promise(c=>{window.ipcRenderer.on(n,a=>{c(a)}),window.ipcRenderer.send(n,r)})}const W=p("h3",{style:{margin:"12px","margin-left":"0"}}," Projects ",-1),Y=h(" New Project "),q=p("div",{style:{margin:"12px","margin-left":"0"}}," Recent used projects ",-1),L={style:{gap:"4px",display:"flex","flex-direction":"column"}},Q=H({__name:"ProjectModal",props:{isOpen:{default:!1,type:Boolean}},emits:["open"],setup(n,{emit:r}){const{setContainer:c,resize:a}=P(),{setTimeline:o}=S(),{setAssets:d}=E(),{project:y}=K(),C="RECENT_USED_PROJECT_PATHS_KEY";async function T(e){return(await fetch(e)).json()}function w(){const e=G();return JSON.parse(localStorage.getItem(C)||(e?"[]":'["/Vega/demo/demo_project.json"]')).map(async t=>({...e?await U("getProjectById",t):await T(t),path:t}))}const f=I([]);function v(e,s){const t=[];let l=0;function i(){l<e.length?e[l++].then(u=>{t.push(u),i()}):s(t)}i()}J(()=>{v(w(),e=>{f.value=e})});function N(e){const s=e.path.split("/");return s.length===0?"":s.at(-1)}function O(){const e=x();d(e.assets),o(e.timeline),c(e.container),r("open"),a()}function k(e){d(e.assets),o(e.timeline),c(e.container),r("open"),y.value=e,a()}return(e,s)=>{const t=A,l=B;return _(),M(l,{"show-close":!1,"is-open":n.isOpen},{default:m(()=>[W,p("div",null,[j(t,{onClick:O},{default:m(()=>[Y]),_:1})]),q,p("div",L,[(_(!0),g(z,null,D(f.value,(i,u)=>(_(),g("div",{key:u},[j(t,{onClick:()=>k(i)},{default:m(()=>[h(F(N(i)),1)]),_:2},1032,["onClick"])]))),128))])]),_:1},8,["is-open"])}}});var oe=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{oe as P,Q as _,ne as a,U as i,K as u};
